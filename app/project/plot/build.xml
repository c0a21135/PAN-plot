<?xml version="1.0" encoding="UTF-8"?>
<project name="PAN" default="dist" basedir=".">

    <!--自分のPCのTomcatの場所を指定-->
    <!--文字列の最後は，スラッシュ[/」無しでお願いします-->
    <property name="TOMCAT_HOME" location="C:\xampp\tomcat"/>

    <description>This buildfile was generated by GenerateAnt plugin for IntelliJ IDEA</description>
    <!--set global properties for this build-->
    <property name="src" location="WEB-INF/src" />
    <property name="build" location="WEB-INF/classes" />
    <property name="lib" location="lib" />
    <property name="dist" location="dist" />
    <property name="docsapi" location="apidocs"/>

    <!-- プロジェクト名を記入 -->
    <property name="NAME" value="plot"/>

    <target name="clean">
        <!--Delete created directory trees-->
        <delete dir="${build}" includeEmptyDirs="true" />
        <delete includeEmptyDirs="true">
            <fileset dir="${dist}" excludes="lib/**" />
        </delete>
    </target>

    <target name="init">
        <!--creates the build directory-->
        <mkdir dir="${build}" />
        <mkdir dir="${dist}" />
    </target>

    <target name="doc" depends="init">
        <javadoc destdir="${docsapi}" author="true" version="true" use="true" windowtitle="API for pnw" encoding="UTF-8">
            <fileset dir="${src}" defaultexcludes="yes">
                <!--<exclude name="**/*Test.java" />
        <exclude name="**/Test*.java" />  -->
            </fileset>
        </javadoc>
    </target>


    <target name="build" depends="init">
        <!--Compiles the java code from ${src} directory into ${build} directory-->
        <javac encoding="utf-8" destdir="${build}" source="11" target="11">
            <!--<javac destdir="${build}">-->
            <src path="${src}" />
            <classpath path="${lib}/servlet-api.jar" />
            <classpath path="${lib}/jsp-api.jar" />
            <classpath path="${lib}/json-20231013.jar" />
            <!--<exclude name="**/*Test.java" />
      <exclude name="**/Test*.java" />  -->
        </javac>
    </target>

    <target name="dist" depends="build">
        <!--Put everything in ${build} into the MyProject-${DSTAMP}.jar file-->
        <tstamp />
        <jar jarfile="${dist}/gripps-${DSTAMP}.jar" basedir="${build}" />
    </target>

    <!-- warファイル作成 -->
    <target name="war" depends="clean,init,build">
        <war destfile="${dist}/${NAME}.war" webxml="WEB-INF/web.xml">
            <fileset dir=".">
                <include name="**/*" />
                <include name="**/*.jsp" />
                <include name="**/*.html" />
                <include name="**/*.css" />
                <include name="**/*.js" />
                <exclude name="WEB-INF/src/" />
                <exclude name="**/*.java"/>
                <exclude name="jsch-0.1.55.jar" />
                <exclude name="WEB-INF/src/" />
                <exclude name="**/*.java"/>
                <exclude name="build.xml" />
                <exclude name="ant/**"/>
                <exclude name="**/*.bat" />
                <exclude name="**/*.sh" />
            </fileset>
            <!-- クラス全部 -->
            <classes dir="WEB-INF/classes" />
        </war>
    </target>

    <tstamp>
        <format property="yyyymmdd" pattern="yyyy-MM-dd" />
    </tstamp>


</project>